<!-- Game Container -->
<div class="game-container">
  
  <!-- Header -->
  <div class="header">
    <div class="game-info">
      <img src="assets/crocoGuessr.svg" (click)="goToHome()" style="height: 30px;" alt="Tampi Logo">
      <div class="score-info">
        <span class="score-text">Puntos: {{puntosTotales}} </span>
        <span class="round-text">Ronda: {{rondaActual}} / {{maxRondas}}</span>
      </div>
    </div>
  </div>

  <!-- Game Content -->
  <div class="game-content" *ngIf="!showFinalScore">
    
    <!-- Street View Container -->
    <div class="street-view-container">
      <div #streetView class="street-view"></div>
    </div>

    <!-- Map Container -->
    <div class="map-container">
      <div #map class="map"></div>
      
      <!-- Control Buttons -->
      <div class="control-buttons">
        <button 
          class="guess-btn" 
          (click)="makeGuess()"
          [disabled]="!marker"
          *ngIf="!showRoundResult">
          Adivinar
        </button>
        
        <button 
          class="next-round-btn" 
          (click)="siguienteRonda()"
          *ngIf="showRoundResult && rondaActual < maxRondas">
          Siguiente
        </button>
        
        <button 
          class="finish-game-btn" 
          (click)="finalizarJuego()"
          *ngIf="showRoundResult && rondaActual >= maxRondas">
          Ver Resultado Final
        </button>
      </div>
      
      <!-- Resultado simple -->
      <div class="round-result-simple" *ngIf="showRoundResult">
        <p><strong>Distancia:</strong> {{currentRoundDistance}}</p>
        <p><strong>+{{currentRoundPoints}} puntos</strong></p>
      </div>
    </div>

  </div>

  <div class="final-score-panel" *ngIf="showFinalScore">
    <div class="final-score-content">
      <h2>¡Juego Terminado!</h2>
      <div class="final-details">
        <p><strong>Distancia:</strong> {{finalDistance}}</p>
        <p><strong>Puntos obtenidos:</strong> {{puntosTotales}}</p>
        <div class="custom-mode-warning" *ngIf="gameMode === 'custom'">
          ⚠️ Modo personalizado: Tu puntuación no se guardará en el leaderboard
        </div>
      </div>
      
      <div class="name-input">
        <input 
          type="text" 
          [(ngModel)]="playerName" 
          placeholder="Ingresa tu nombre"
          class="name-field">
        <button 
          class="save-btn" 
          (click)="saveScore()"
          [disabled]="!playerName || playerName.trim() === ''">
          Guardar Puntuación
        </button>
      </div>
      
      <button class="play-again-btn" (click)="playAgain()">
        Jugar de Nuevo
      </button>
    </div>
  </div>

</div>
